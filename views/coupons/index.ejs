
    <%- include('./navbar') %>

<div class="container py-4">
  <h1>Coupons</h1>
  <% if (flash.success) { %>
    <div class="alert alert-success"><%= flash.success %></div>
  <% } %>
  <% if (flash.error) { %>
    <div class="alert alert-danger"><%= flash.error %></div>
  <% } %>
  <a href="/admin/coupons/new" class="btn btn-primary mb-3">New Coupon</a>
  <table class="table">
    <thead>
      <tr>
        <th>Code</th><th>Type</th><th>Value</th><th>Min Order</th><th>Max Discount</th><th>Valid From</th><th>Valid Until</th><th>Active</th><th></th>
      </tr>
    </thead>
    <tbody>
      <% coupons.forEach(c=>{ %>
        <tr>
          <td><%= c.code %></td>
          <td><%= c.type %></td>
          <td><%= c.value %></td>
          <td><%= c.minimum_order_amount||'-' %></td>
          <td><%= c.maximum_discount_amount||'-' %></td>
          <td><%= c.valid_from.toISOString().slice(0,10) %></td>
          <td><%= c.valid_until.toISOString().slice(0,10) %></td>
          <td><%= c.is_active ? 'Yes' : 'No' %></td>
          <td>
            <form action="/admin/coupons/<%= c.id %>/delete" method="POST" style="display:inline">
              <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

